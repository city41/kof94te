{
  "description": "Go to new routine after HTP instead of team select",
  "subroutineSpace": {
    "start": "97000",
    "end": "bfff0"
  },
  "patches": [
    {
      "type": "prom",
      "description": "main routine",
      "subroutine": true,
      "symbol": "MAIN_ROUTINE",
      "patchAsm": [
        "move.b $10fd96, d0 ; load BIOS_P1CURRENT",
        "btst #$4, d0 ; is A pressed?",
        "beq loop ; it's not? let's try again next frame",
        "move.l #$37edc, $108584 ; it is, set up the order select routine (hopefully...)",
        "bra done",
        "loop:",
        "move.l #$2bffc8, $108584 ; set up so the game will come back in here again",
        "done:",
        "rts"
      ]
    },
    {
      "type": "prom",
      "description": "clean up routine",
      "subroutine": true,
      "symbol": "CLEAN_UP_ROUTINE",
      "patchAsm": [
        "jsr $3604",
        "jsr $15a0",
        "jsr $25aa",
        "jsr $5e72",
        "jsr $c004c8",
        "move.l #$2MAIN_ROUTINE, $108584",
        "rts"
      ]
    },
    {
      "type": "prom",
      "description": "jump to new address when press A in HTP",
      "address": "13b9dc",
      "patchAsm": ["move.l #$2CLEAN_UP_ROUTINE, $584(A5)"]
    }
  ]
}
